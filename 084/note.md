## 思路

- 维护一个单调递增栈，每当遇到小于栈顶的元素，不断弹出栈顶元素，同时计算面积。
- 计算面积分为两种情况
    - 如果弹出元素后栈为空，则当前面积为:
    ```
    # cur为弹出元素，i为当前索引。
    # *i是因为单调递增栈弹入的元素一定比弹出的元素小，加入位置n弹出后栈为空，则之前摊入的所有元素一定大于等于位置n的元素 (如图位置 10)
    heights[cur] * i
    ```
    - 如果弹出元素后栈不为空，则面积为
    ```
    # 需要用当前位置减去栈顶元素的位置(弹出位置的前一个位置)再减 1
    # 如图中 3 和 2
    heights[cur]*(i - max_stack[-1] - 1)
    ```
- 这里用了个小 trick，在高度数组最后面加上一个0，这样最后的一部分递增的高度也可以被处理了。如图中 11,12和13

![](4.png)